<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="images/radhaicon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radha Naam Bank</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        #nameBox {
            width: 90%;
            height: 100px;
            font-size: 18px;
            max-width: 500px;
        }
        .counter, .buttons {
            margin-top: 20px;
            font-size: 20px;
        }
        button {
            margin: 5px;
            font-size: 18px;
            padding: 10px;
        }
        .input-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        @media (max-width: 600px) {
            button {
                font-size: 16px;
                padding: 8px;
            }
            #nameBox {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <h1>Radha Naam Bank</h1>
    <textarea id="nameBox" placeholder="Type Rada for राधा here or use buttons..."></textarea>
    <div class="input-buttons">
        <button onclick="insertText('रा')">रा</button>
        <button onclick="insertText('धा ')">धा</button>
    </div>
    <div class="counter">Names in Box: <span id="nameCount">0</span></div>
    <div class="counter">Total Names: <span id="totalNameCount">0</span></div>
    <div class="counter">Malas in Box: <span id="malaCount">0</span></div>
    <div class="counter">Total Malas: <span id="totalMalaCount">0</span></div>
    <button id="saveMala">Save Mala</button>
    
    <script>
        let totalNameCount = parseFloat(localStorage.getItem("totalNameCount")) || 0;
        let totalMalaCount = parseFloat(localStorage.getItem("totalMalaCount")) || 0;

        document.getElementById("totalNameCount").innerText = totalNameCount;
        document.getElementById("totalMalaCount").innerText = totalMalaCount.toFixed(2);

        function insertText(text) {
            let nameBox = document.getElementById("nameBox");
            nameBox.value += text;
            nameBox.dispatchEvent(new Event('input'));
        }

        document.getElementById("nameBox").addEventListener("input", function(event) {
            let value = event.target.value;
            let transformed = value.replace(/R/g, "रा").replace(/A/g, "ा").replace(/D/g, "धा");
            
            if (value.endsWith("rada")) {
                transformed = transformed.slice(0, -4) + "राधा ";
            }
            
            event.target.value = transformed;
            
            let namesArray = transformed.match(/राधा/g) || [];
            let nameCount = namesArray.length;
            let malaCount = nameCount / 108;
            
            document.getElementById("nameCount").innerText = nameCount;
            document.getElementById("malaCount").innerText = malaCount.toFixed(2);
        });

        document.getElementById("saveMala").addEventListener("click", function() {
            let nameCount = parseInt(document.getElementById("nameCount").innerText);
            let malaCount = parseFloat(document.getElementById("malaCount").innerText);
            
            totalNameCount += nameCount;
            totalMalaCount += malaCount;
            
            localStorage.setItem("totalNameCount", totalNameCount);
            localStorage.setItem("totalMalaCount", totalMalaCount);
            
            document.getElementById("totalNameCount").innerText = totalNameCount;
            document.getElementById("totalMalaCount").innerText = totalMalaCount.toFixed(2);
            
            document.getElementById("nameBox").value = "";
            document.getElementById("nameCount").innerText = "0";
            document.getElementById("malaCount").innerText = "0.00";
        });
    </script>
<audio id="bgMusic" loop>
    <source src="Sri Radha Nam Kirtan _ Vrindavan Sankirtaniyas.mp3" type="audio/mpeg">
</audio>

<script>
    document.addEventListener("click", function playMusic() {
        let audio = document.getElementById("bgMusic");
        if (audio.paused) {
            audio.play();
        }
        document.removeEventListener("click", playMusic); // Ensures it starts only once
    });
</script>

</body>
</html>
